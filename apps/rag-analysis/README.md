# ğŸ›ï¸ å¢å¼ºç‰ˆå¤šæ™ºèƒ½ä½“æŠ•ç ”åˆ†æç³»ç»Ÿ

> **åŸºäºé¡¶çº§æŠ•ç ”å›¢é˜Ÿå®è·µçš„ä¸“ä¸šçº§é‡‘èåˆ†æAIç³»ç»Ÿ**

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

æœ¬ç³»ç»Ÿæ¨¡æ‹Ÿé¡¶çº§å¯¹å†²åŸºé‡‘å†…éƒ¨æŠ•ç ”å›¢é˜Ÿçš„"è¾©è¯ä¸åšå¼ˆ"è¿‡ç¨‹ï¼Œé€šè¿‡8ä¸ªä¸“ä¸šæ™ºèƒ½ä½“è§’è‰²çš„åä½œï¼Œæä¾›æ·±åº¦çš„æŠ•èµ„åˆ†æå’Œå†³ç­–æ”¯æŒã€‚

### ğŸ”¥ æ ¸å¿ƒåˆ›æ–°

- **ğŸ­ çœŸå®è§’è‰²å»ºæ¨¡** - åŸºäºåå°”è¡—æŠ•ç ”å›¢é˜Ÿå®é™…å·¥ä½œæµç¨‹è®¾è®¡
- **ğŸ”— èˆ†æƒ…APIé›†æˆ** - æ¥å…¥å›¢é˜Ÿèˆ†æƒ…æ”¶é›†éƒ¨é—¨çš„ä¸“ä¸šæ•°æ®
- **ğŸ§  å¤šç»´åº¦åˆ†æ** - æ•°æ®æƒ…æŠ¥ã€å™äº‹åˆ†æã€é‡åŒ–å»ºæ¨¡ã€é£é™©æ§åˆ¶ã€å®è§‚ç­–ç•¥
- **âš¡ æ™ºèƒ½è·¯ç”±** - åŸºäºé£é™©è¯„ä¼°çš„åŠ¨æ€å·¥ä½œæµè·¯ç”±
- **ğŸ“Š æŠ•å§”ä¼šçºªè¦** - ç”Ÿæˆå®Œæ•´çš„æŠ•èµ„å§”å‘˜ä¼šä¼šè®®è®°å½•

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ™ºèƒ½ä½“è§’è‰²ä½“ç³»

```mermaid
graph TB
    A[å¸‚åœºäº‹ä»¶è¾“å…¥] --> B[æ•°æ®æƒ…æŠ¥ä¸“å®¶<br/>Enhanced Data Intelligence]
    B --> C[å™äº‹å¥—åˆ©è€…<br/>Narrative Arbitrageur]
    B --> D[é‡åŒ–åˆ†æå¸ˆ<br/>Quant Analyst]  
    B --> E[é€†å‘æ€€ç–‘è®ºè€…<br/>Contrarian Skeptic]
    B --> F[äºŒçº§æ•ˆåº”ç­–ç•¥å¸ˆ<br/>Second-Order Effects]
    
    C --> G[å®è§‚ç­–ç•¥å¸ˆ<br/>Macro Strategist]
    D --> G
    E --> G
    F --> G
    
    G --> H[é£æ§å®˜<br/>Risk Controller]
    H --> I{é£é™©è¯„ä¼°}
    I -->|é«˜é£é™©| J[é£é™©é¢„è­¦]
    I -->|å¯æ§é£é™©| K[é¦–å¸­æ•´åˆå®˜<br/>Chief Synthesizer]
    
    J --> L[é‡æ–°è¯„ä¼°æµç¨‹]
    L --> C
    
    K --> M[æœ€ç»ˆæŠ•èµ„å†³ç­–]
    M --> N[æŠ•å§”ä¼šçºªè¦]
```

### å…«å¤§ä¸“ä¸šè§’è‰²

#### 1. ğŸ” å¢å¼ºç‰ˆæ•°æ®æƒ…æŠ¥ä¸“å®¶ (Enhanced Data Intelligence Specialist)
- **åŸå‹**: Bloomberg Terminalæ“ä½œå‘˜ + æ•°æ®ç§‘å­¦å®¶
- **èŒè´£**: å¤šæºæ•°æ®é‡‡é›†ã€èˆ†æƒ…åˆ†æã€å¼‚å¸¸æ£€æµ‹ã€æ•°æ®è´¨é‡è¯„ä¼°
- **å¢å¼ºåŠŸèƒ½**: é›†æˆèˆ†æƒ…æ”¶é›†éƒ¨é—¨APIï¼Œæä¾›å®æ—¶èˆ†æƒ…æ•°æ®æ”¯æ’‘

#### 2. ğŸ“ˆ å™äº‹å¥—åˆ©è€… (Narrative Arbitrageur)  
- **åŸå‹**: åå°”è¡—è¶‹åŠ¿äº¤æ˜“å‘˜ï¼ŒMemeè‚¡ç¥¨çŒæ‰‹
- **èŒè´£**: æŒ–æ˜è¯„ä¼°èˆ†æƒ…æ ¸å¿ƒå™äº‹ï¼Œåˆ¤æ–­ä¼ æ’­æ½œåŠ›ä¸å¸‚åœºå½±å“åŠ›

#### 3. ğŸ”¢ ä¸€çº§æ•ˆåº”é‡åŒ–åˆ†æå¸ˆ (First-Order Impact Quant)
- **åŸå‹**: ä¸¥è°¨çš„å–æ–¹åˆ†æå¸ˆï¼Œæ•°æ®ç§‘å­¦å®¶
- **èŒè´£**: é‡åŒ–èˆ†æƒ…äº‹ä»¶å¯¹è´¢åŠ¡æ¨¡å‹çš„ç›´æ¥å½±å“

#### 4. ğŸ¯ é€†å‘æ€€ç–‘è®ºè€… (Contrarian Skeptic)
- **åŸå‹**: æ¿€è¿›ä¹°æ–¹è°ƒæŸ¥å‘˜ï¼Œä¸“ä¸šåšç©ºæœºæ„
- **èŒè´£**: æŒ‘æˆ˜ä¸»æµè§‚ç‚¹ï¼Œå‘æ˜è¢«å¿½è§†çš„é£é™©å’Œä»·å€¼

#### 5. ğŸŒ äºŒçº§æ•ˆåº”ç­–ç•¥å¸ˆ (Second-Order Effects Strategist)
- **åŸå‹**: å®è§‚å¯¹å†²åŸºé‡‘ç»ç†ï¼Œåšå¼ˆè®ºå¤§å¸ˆ
- **èŒè´£**: åˆ†æè¿é”ååº”ï¼Œç«äº‰æ ¼å±€ã€ç›‘ç®¡æ”¿ç­–ã€äº§ä¸šé“¾å˜åŒ–

#### 6. ğŸŒ å®è§‚ç­–ç•¥å¸ˆ (Macro Strategist)
- **åŸå‹**: å…¨çƒå®è§‚å¯¹å†²åŸºé‡‘ç­–ç•¥å¸ˆ
- **èŒè´£**: å®è§‚ç»æµåˆ†æã€æ”¿ç­–å½±å“è¯„ä¼°ã€è·¨å¸‚åœºå…³è”åˆ†æ

#### 7. ğŸ›¡ï¸ ç‹¬ç«‹é£æ§å®˜ (Risk Controller)
- **åŸå‹**: æŠ•èµ„å§”å‘˜ä¼šé£æ§è´Ÿè´£äºº
- **èŒè´£**: ç‹¬ç«‹é£é™©è¯„ä¼°ã€å‹åŠ›æµ‹è¯•ã€åˆè§„æ£€æŸ¥ã€é£é™©é¢„è­¦

#### 8. ğŸ‘‘ é¦–å¸­æ•´åˆå®˜ (Chief Synthesizer)
- **åŸå‹**: åŸºé‡‘æŠ•èµ„å†³ç­–å§”å‘˜ä¼šä¸»å¸­(CIO)
- **èŒè´£**: ç»¼åˆæ‰€æœ‰è§‚ç‚¹ï¼Œå½¢æˆæœ€ç»ˆæŠ•èµ„å†³ç­–å’Œè¡ŒåŠ¨å»ºè®®

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒé…ç½®

1. **è®¾ç½®ç¯å¢ƒå˜é‡**:
```bash
# LLMç½‘å…³é…ç½®
export LLM_GATEWAY_URL="http://localhost:8002/v1/chat/completions"
export LLM_MODEL="deepseek-v3"

# èˆ†æƒ…APIé…ç½®ï¼ˆé‡è¦ï¼ï¼‰
export SENTIMENT_API_URL="http://your-sentiment-api.com"
export SENTIMENT_API_KEY="your-api-key"

# å…¶ä»–é…ç½®
export ENVIRONMENT="development"
export DEBUG="true"
```

2. **å®‰è£…ä¾èµ–**:
```bash
pip install -r requirements.txt
```

### å¯åŠ¨æœåŠ¡

```bash
cd apps/rag-analysis
python src/main.py
```

æœåŠ¡å°†åœ¨ `http://localhost:8010` å¯åŠ¨

### APIè°ƒç”¨ç¤ºä¾‹

```python
import httpx
import asyncio

async def analyze_market_event():
    client = httpx.AsyncClient()
    
    request_data = {
        "topic": "æŸç§‘æŠ€å…¬å¸å‘å¸ƒAIæ–°äº§å“",
        "headline": "é©å‘½æ€§AIäº§å“å¼•å‘å¸‚åœºçƒ­è®®",
        "content": "è¯¥å…¬å¸ä»Šæ—¥å‘å¸ƒäº†æ–°ä¸€ä»£AIäº§å“ï¼Œé¢„è®¡å°†æ˜¾è‘—æå‡è¡Œä¸šç«äº‰åŠ›...",
        "symbols": ["000001", "600036"],
        "time_horizon": "medium",
        "risk_appetite": "balanced",
        "region": "CN",
        "max_iterations": 2
    }
    
    response = await client.post(
        "http://localhost:8010/v1/analysis/execute",
        json=request_data
    )
    
    result = response.json()
    print("åˆ†æç»“æœ:", result)
    
    await client.aclose()

# è¿è¡Œåˆ†æ
asyncio.run(analyze_market_event())
```

## ğŸ”§ èˆ†æƒ…APIé›†æˆæŒ‡å—

### APIæ¥å£è§„èŒƒ

æ‚¨çš„èˆ†æƒ…æ”¶é›†éƒ¨é—¨éœ€è¦æä¾›ä»¥ä¸‹APIæ¥å£ï¼š

#### 1. ç»¼åˆèˆ†æƒ…æŸ¥è¯¢
```
POST /api/v1/sentiment/query
Content-Type: application/json

{
  "keywords": ["å…³é”®è¯1", "å…³é”®è¯2"],
  "symbols": ["è‚¡ç¥¨ä»£ç 1", "è‚¡ç¥¨ä»£ç 2"],
  "time_range": "24h",
  "data_sources": ["news", "social", "research"],
  "max_results": 100
}
```

**å“åº”æ ¼å¼**:
```json
{
  "data_points": [
    {
      "id": "content_id",
      "title": "æ ‡é¢˜",
      "content": "å†…å®¹",
      "source": "æ¥æº",
      "source_type": "news|weibo|wechat|research_report",
      "publish_time": "2024-01-01T12:00:00Z",
      "sentiment_score": 0.8,
      "sentiment_label": "positive",
      "confidence": 0.9,
      "influence_score": 0.7,
      "mentioned_stocks": ["000001"],
      "key_topics": ["AI", "ç§‘æŠ€"]
    }
  ],
  "overall_sentiment": {
    "positive": 0.6,
    "negative": 0.2, 
    "neutral": 0.2
  },
  "hot_topics": [...],
  "sentiment_anomalies": [...]
}
```

#### 2. å®æ—¶èˆ†æƒ…æ‘˜è¦
```
POST /api/v1/sentiment/realtime
{
  "symbols": ["000001", "600036"],
  "time_window": "1h",
  "metrics": ["sentiment_score", "volume", "trend"]
}
```

#### 3. æ–°é—»æµåˆ†æ
```
POST /api/v1/news/flow-analysis
{
  "keywords": ["AI", "ç§‘æŠ€"],
  "time_range": "24h",
  "analysis_types": ["sentiment", "impact", "credibility"]
}
```

#### 4. ç¤¾äº¤åª’ä½“çƒ­åº¦
```
POST /api/v1/social/buzz-analysis
{
  "symbols": ["000001"],
  "platforms": ["weibo", "wechat", "zhihu"],
  "metrics": ["mention_volume", "sentiment", "viral_content"]
}
```

#### 5. ç ”æŠ¥æƒ…æ„Ÿåˆ†æ
```
POST /api/v1/research/sentiment
{
  "symbols": ["000001"],
  "report_types": ["analyst_report", "institution_research"],
  "time_range": "30d"
}
```

### é…ç½®èˆ†æƒ…API

åœ¨ `src/config/settings.py` ä¸­é…ç½®æ‚¨çš„èˆ†æƒ…APIï¼š

```python
@dataclass  
class SentimentAPIConfig:
    base_url: str = "http://your-sentiment-api.com"
    api_key: str = "your-secret-key"
    timeout: float = 30.0
    max_retries: int = 3
```

## ğŸ“Š åˆ†æç»“æœç¤ºä¾‹

ç³»ç»Ÿè¿”å›çš„å¢å¼ºç‰ˆåˆ†æç»“æœåŒ…å«ï¼š

```json
{
  "success": true,
  "message": "å¢å¼ºç‰ˆå¤šæ™ºèƒ½ä½“åˆ†æå®Œæˆ",
  "enhanced_findings": {
    "narrative": {
      "one_liner": "AIäº§å“å‘å¸ƒå¼•å‘ç§‘æŠ€è‚¡çƒ­æ½®",
      "meme_potential": 0.85,
      "lifecycle_days": 7
    },
    "data_intelligence": {
      "market_snapshot": {...},
      "sentiment_indicators": {...},
      "data_quality_score": 0.87
    },
    "risk_control": {
      "overall_risk_score": 0.35,
      "risk_control_recommendations": [...]
    },
    "macro_strategic": {
      "strategic_market_outlook": {...},
      "regime_change_indicators": [...]
    }
  },
  "enhanced_decision": {
    "action": "buy",
    "confidence": 0.78,
    "risk_adjusted_confidence": 0.72,
    "macro_alignment_score": 0.85
  },
  "committee_minutes": {
    "meeting_id": "meeting-20241201120000",
    "participants": ["æ•°æ®æƒ…æŠ¥ä¸“å®¶", "å™äº‹å¥—åˆ©è€…", ...],
    "key_debates": [...],
    "final_resolution": "buy"
  }
}
```

## ğŸ” ç³»ç»Ÿç‰¹è‰²åŠŸèƒ½

### 1. æ™ºèƒ½å·¥ä½œæµè·¯ç”±
- åŸºäºé£é™©è¯„ä¼°è‡ªåŠ¨è°ƒæ•´åˆ†ææµç¨‹
- é«˜é£é™©æƒ…å†µè‡ªåŠ¨è§¦å‘é‡æ–°è¯„ä¼°æˆ–ä¸­æ­¢æµç¨‹
- æ”¯æŒå¤šè½®è¿­ä»£ä¼˜åŒ–å†³ç­–è´¨é‡

### 2. æŠ•èµ„å§”å‘˜ä¼šçºªè¦
- è‡ªåŠ¨ç”Ÿæˆå®Œæ•´çš„ä¼šè®®è®°å½•
- è®°å½•å„æ™ºèƒ½ä½“çš„å…³é”®è§‚ç‚¹å’Œåˆ†æ­§
- è¿½è¸ªå†³ç­–è¿‡ç¨‹å’Œå…±è¯†å½¢æˆ

### 3. æ•°æ®è´¨é‡è¯„ä¼°
- å¤šç»´åº¦æ•°æ®è´¨é‡è¯„åˆ†
- æ•°æ®æºå¯é æ€§è¯„ä¼°
- å¼‚å¸¸æ•°æ®è‡ªåŠ¨è¯†åˆ«å’Œé¢„è­¦

### 4. æ€§èƒ½ç›‘æ§
- å®æ—¶ç›‘æ§å„æ™ºèƒ½ä½“æ€§èƒ½
- å“åº”æ—¶é—´å’Œå‡†ç¡®ç‡ç»Ÿè®¡
- ç³»ç»Ÿå¥åº·çŠ¶æ€æŠ¥å‘Š

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„æ™ºèƒ½ä½“è§’è‰²

1. åœ¨ `src/services/agents/` ä¸‹åˆ›å»ºæ–°çš„æ™ºèƒ½ä½“ç±»
2. ç»§æ‰¿ `BaseAgent` å¹¶å®ç° `analyze` æ–¹æ³•
3. åœ¨ `src/services/graph_workflow.py` ä¸­æ³¨å†Œæ–°è§’è‰²
4. æ›´æ–°é…ç½®æ–‡ä»¶æ·»åŠ è§’è‰²é…ç½®

### è‡ªå®šä¹‰åˆ†æé€»è¾‘

æ™ºèƒ½ä½“çš„åˆ†æé€»è¾‘é€šè¿‡ç²¾å¿ƒè®¾è®¡çš„æç¤ºè¯å®ç°ï¼Œæ‚¨å¯ä»¥ï¼š

- ä¿®æ”¹ç³»ç»Ÿæç¤ºè¯ä»¥è°ƒæ•´åˆ†æè§†è§’
- æ·»åŠ ç‰¹å®šé¢†åŸŸçš„ä¸“ä¸šçŸ¥è¯†
- é›†æˆå¤–éƒ¨æ•°æ®æºå’ŒAPI
- å®ç°è‡ªå®šä¹‰çš„å›é€€æœºåˆ¶

### æ‰©å±•æ•°æ®æº

ç³»ç»Ÿæ”¯æŒçµæ´»çš„æ•°æ®æºæ‰©å±•ï¼š

- åœ¨ `SentimentAPIClient` ä¸­æ·»åŠ æ–°çš„APIæ¥å£
- å®ç°æ•°æ®æ ¼å¼è½¬æ¢å’Œæ ‡å‡†åŒ–
- æ·»åŠ æ•°æ®è´¨é‡éªŒè¯é€»è¾‘

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- **å¹¶è¡Œå¤„ç†**: æ™ºèƒ½ä½“åˆ†æä»»åŠ¡å¹¶è¡Œæ‰§è¡Œï¼Œæ˜¾è‘—æå‡å“åº”é€Ÿåº¦
- **ç¼“å­˜æœºåˆ¶**: æ”¯æŒç»“æœç¼“å­˜ï¼Œé¿å…é‡å¤è®¡ç®—
- **è¿æ¥æ± **: HTTPå®¢æˆ·ç«¯ä½¿ç”¨è¿æ¥æ± ï¼Œæå‡ç½‘ç»œæ•ˆç‡
- **å®¹é”™è®¾è®¡**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œå›é€€æœºåˆ¶

## ğŸ”’ å®‰å…¨è€ƒè™‘

- APIå¯†é’¥å®‰å…¨å­˜å‚¨
- è¯·æ±‚é¢‘ç‡é™åˆ¶
- æ•°æ®ä¼ è¾“åŠ å¯†
- è®¿é—®æƒé™æ§åˆ¶

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚éœ€æŠ€æœ¯æ”¯æŒæˆ–æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿã€‚

---

**è¿™æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿé¡¶çº§æŠ•ç ”å›¢é˜Ÿå·¥ä½œæµç¨‹çš„ä¸“ä¸šçº§AIç³»ç»Ÿï¼Œä¸ºæ‚¨çš„æŠ•èµ„å†³ç­–æä¾›å…¨æ–¹ä½çš„æ™ºèƒ½æ”¯æ’‘ï¼** ğŸš€
